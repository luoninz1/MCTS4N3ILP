#!/bin/bash

#SBATCH --job-name=mcts_smallest_complete_test     ## job name
#SBATCH -A NCKAPLAN_LAB     ## Class account to charge resources
#SBATCH -p standard                ## partition name
#SBATCH --nodes=1             ## (-N) number of nodes the job will use
#SBATCH --ntasks=1            ## (-n) number of processes to be launched
#SBATCH -c 1                 ## number of cores (increased for better parallelism)
#SBATCH --mem=32G             ## increased memory for larger problems
#SBATCH --time 1-00:00:00     ## time limit (3 days)
#SBATCH --error=logs/slurm-%J.err  ## error log file
#SBATCH --output=logs/slurm-%J.out ## output log file
#SBATCH --mail-type=fail,end
#SBATCH --mail-user=luoninz1@uci.edu

module load miniconda3/24.9.2
source /opt/apps/miniconda3/24.9.2/etc/profile.d/conda.sh
conda activate mcgs-env

# Set environment variables for better threading performance
export OMP_NUM_THREADS=1
export NUMBA_NUM_THREADS=1
export NUMBA_THREADING_LAYER=safe  # Ensure thread-safe operations

# $1 = start value, $2 = step size
python smallest_complete_v2.py \
    --start "$1" \
    --end 104 \
    --step "$2" \
    --repeat 20 \
    > logs/mcts_smallest_v2_n_"$1"-100.log